<div class="quiz-container">
  <!-- Section Selector Box -->
  <div class="section-selector-box">
    <div class="section-selector">
      <h3>Select Quiz</h3>

      <!-- Unified Dropdown for All Quizzes -->
      <div class="dropdown">
        <label for="quiz-select">Select Quiz:</label>
        <select id="quiz-select" (change)="changeSection($event)">
          <!-- Dropdown Options -->
          <option value="0">HTML & CSS + Dev Tools</option>
          <option value="1">Intermediate CSS with Responsive Design</option>
          <option value="2">JavaScript: Getting Started</option>
          <option value="3">JavaScript: Data Types & Variables, Operators, Comparisons, Conditionals, Flows, Loops</option>
          <option value="4">JavaScript: Functions, Objects, Built-in Objects</option>
          <option value="5">JavaScript: Scope, Hoisting, JavaScript vs EcmaScript</option>
          <option value="6">JavaScript Intermediate Concepts</option>
          <option value="7">JavaScript Advanced Concepts</option>
          <option value="8">JavaScript: Building Real Things</option>
          <option value="9">JavaScript: Bookmarking App</option>
          <option value="10">TypeScript: Introduction</option>
          <option value="11">Angular: Completing Getting Started</option>
          <option value="12">Angular: The Basics, Debugging</option>
          <option value="13">Angular: Components & Databinding deep dive</option>
          <option value="14">Angular: Directives deep dive</option>
          <option value="15">Angular: Changing pages with routing</option>
          <option value="16">Angular: Routing & Observables</option>
          <option value="17">Angular: Handling forms in Angular apps</option>
          <option value="18">Angular: Forms & Pipes</option>
          <option value="19">Angular: Making HTTP requests</option>
          <option value="20">Angular: Authentication & Route Protection</option>
          <option value="21">Angular: Dynamic Components, Modules & Optimizations</option>
          <option value="22">Angular: Animations, Service Workers & Deployment</option>
          <option value="23">Angular: Unit Testing</option>
        </select>
      </div>
    </div>
  </div>

  <!-- Main Quiz Section -->
  <div class="quiz-section">
    <!-- Display current question -->
    <div *ngIf="currentQuestionIndex < getCurrentSection().questions.length">
      <app-lesson-timer [timeLimit]="30"></app-lesson-timer>
      <h2>Question {{ currentQuestionIndex + 1 }}</h2>
      <p>{{ getCurrentSection().questions[currentQuestionIndex].question }}</p>

      <!-- Multiple-choice questions -->
      <div *ngIf="getCurrentSection().questions[currentQuestionIndex].options.length > 0">
        <div *ngFor="let option of getCurrentSection().questions[currentQuestionIndex].options">
          <label>
            <input type="radio" name="options" [(ngModel)]="selectedOption" [value]="option">
            {{ option }}
          </label>
        </div>
      </div>

      <!-- True/False questions -->
      <div *ngIf="getCurrentSection().questions[currentQuestionIndex].options.length === 0">
        <label>
          <input type="radio" name="options" [(ngModel)]="selectedOption" value="True">
          True
        </label>
        <label>
          <input type="radio" name="options" [(ngModel)]="selectedOption" value="False">
          False
        </label>
      </div>

      <button (click)="submitAnswer()">Submit Answer</button>
      <p>{{ feedback }}</p>
    </div>

    <!-- Review Section -->
    <div *ngIf="showReview">
      <h2>Review Your Answers</h2>
      <p>Total Questions: {{ getCurrentSection().questions.length }}</p>
      <p>Correct Answers: {{ correctCount }} / {{ getCurrentSection().questions.length }} ({{ correctPercentage }}%)</p>
      <ul>
        <li *ngFor="let result of results" [ngClass]="{'correct': result.isCorrect, 'incorrect': !result.isCorrect}">
          <p>Question {{ result.index + 1 }}: {{ result.question }}</p>
          <p>Your Answer: {{ result.selectedOption }}</p>
          <p>Correct Answer: {{ result.correctAnswer }}</p>
          <p>Status: {{ result.isCorrect ? 'Correct' : 'Incorrect' }}</p>
        </li>
      </ul>
    </div>
  </div>

  <!-- Navigation Box -->
  <div class="navigation-box">
    <h3>Question Navigation</h3>
    <div class="question-numbers">
      <div *ngFor="let number of questionNumbers"
           [ngClass]="{'answered': isAnswered(number), 'not-answered': !isAnswered(number)}"
           (click)="navigateToQuestion(number)">
        {{ number }}
      </div>
    </div>
  </div>
</div>
